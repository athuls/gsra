<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SenStore Server: Developing client software</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="index.html">SenStore Server Manual</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Developing client software </h1>  </div>
</div>
<div class="contents">
<ul>
<li><a class="el" href="a00004.html#client_ice_sec">ZeroC Ice interface programming</a></li>
<li><a class="el" href="a00004.html#client_connect_sec">Connecting to the server</a></li>
<li><a class="el" href="a00004.html#client_session_sec">Session management</a></li>
<li><a class="el" href="a00004.html#client_ref_sec">Further reading</a></li>
</ul>
<h2><a class="anchor" id="client_ice_sec"></a>
ZeroC Ice interface programming</h2>
<p>Clients can be developed in any programming language supported by ZeroC Ice. The Ice interface is defined in <code>SenStore.ice</code> (see also the Ice interface documentation in the Extras package), which must be used to generate the bindings for the desired programming language.</p>
<p>The ZeroC Ice documentation details the generation of the client and server stubs from an interface file, and how to implement clients and servers in several programming languages. Programmers unfamiliar with ZeroC Ice are encouraged to study the examples provided by ZeroC before developing SenStore clients.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>All examples below are presented in pseudo-code, unless indicated otherwise.</dd></dl>
<h2><a class="anchor" id="client_connect_sec"></a>
Connecting to the server</h2>
<p>The most important interface of the SenStore server is the Manager, which is a gateway to all database objects. To get access to a Manager, take the following steps:</p>
<ol type="1">
<li>Initialize the Ice runtime: <div class="fragment"><pre class="fragment">    ic = Ice.initialize(sys.argv);
</pre></div></li>
<li>Get a proxy to the <a class="el" href="a00210.html" title="Implementation of the SessionFactory servant singleton.">scshm.database.server.SenStoreServer.SessionFactoryI</a> singleton: <div class="fragment"><pre class="fragment">    base = ic.stringToProxy(<span class="stringliteral">&quot;SessionFactory:default -h localhost -p 10001&quot;</span>);
    sessionFactory = SenStoreServer.SessionFactoryPrx.checkedCast(base);
</pre></div></li>
<li>Get a proxy to a new <a class="el" href="a00211.html" title="Implementation of the Session servant.">scshm.database.server.SenStoreServer.SessionI</a> object: <div class="fragment"><pre class="fragment">    session = sessionFactory.createSession(<span class="stringliteral">&quot;My smart client&quot;</span>);
</pre></div></li>
<li>Get a proxy to the session's <a class="el" href="a00207.html" title="Implementation of SenStore manager servant.">scshm.database.server.SenStoreServer.SenStoreMngrI</a> object: <div class="fragment"><pre class="fragment">    mngr = session.getManager();
</pre></div> Now the manager proxy can be used to access the database objects.</li>
</ol>
<h2><a class="anchor" id="client_session_sec"></a>
Session management</h2>
<p>The server manages client interaction through sessions, which helps the server to manage access the data by multiple clients, and perform clean up even when a client crashes. The most important consequence for the client is the need to keep the session alive by calling <a class="el" href="a00211.html#a2b7df8a2546317ee4c88df534d180a2e" title="Refreshes this session.">scshm.database.server.SenStoreServer.SessionI.refresh()</a>: </p>
<div class="fragment"><pre class="fragment">  session.refresh();
</pre></div><p> For simple clients it may be sufficient to intersperse client calls with session refresh calls. For more complex clients it might be more convient to set up a daemon thread that periodically calls the refresh method: </p>
<div class="fragment"><pre class="fragment">  run() {
    dt = session.getTimeout() / 2.0;
    <span class="keywordflow">while</span> (running) {
      session.refresh();
      sleep(dt);
    }
    session.destroy()
  }
</pre></div><p> It is encouraged to call the <a class="el" href="a00211.html#ae46e4bbca7ea3c6a090bf7c1138a58a5" title="Marks this session for removal.">scshm.database.server.SenStoreServer.SessionI.destroy()</a> method once the session is no longer needed, as that allows the server to immediately clean up any resources and clear any locks it may have set.</p>
<h2><a class="anchor" id="client_ref_sec"></a>
Further reading</h2>
<p>Python client implementors are encouraged to use the <a class="el" href="a00247.html" title="Python wrapper to simplify connecting to the SenStore server.">scshm.database.client.SenStoreClient</a> package, and to study the example client scripts that are part of the <a href="../../client/html/index.html">SenStoreClient</a> distribution.</p>
<p>See the <a href="../../SenStoreDef.html">SenStore database schema documentation</a> for a hyperlinked version of the SenStore database schema file <a href="../../SenStore.dbd"><code>SenStore.dbd</code></a>, and the <a href="../../ice/index.html">SenStore Ice interface documentation</a> for detailed information on the API of the database objects. </p>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Sep 7 2010 11:34:36 for SenStore Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
